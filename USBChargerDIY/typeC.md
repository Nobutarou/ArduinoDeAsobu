# typeC 充電器

## 参考サイト

https://elchika.com/article/daa1d3b6-acf8-450e-b9a9-974bb2a755d7/

参考サイト1 として回路図を参考にさせてもらう。

https://www.marubun.co.jp/technicalsquare/10483/

参考サイト2 で、typeC 給電の仕組みを学べるサイト。正直、今の自分には理解できない部分が多い。

## 回路1

まずは、参考サイト1 の通りの回路を組んでみる。黒塗りの抵抗だけど、参考サイト2 によれば 56k
Ωで 0.5A, 22kΩで 1.5A、10kΩで 3A ということらしい。

ということで、黒塗り抵抗を 10kΩにすると最大 5V 3A の充電ができるような気がするので、これ
は実際に抵抗を変えてテストだ。

参考サイト1 の回路でできるのは、参考サイト2 の「Source(USB Host)-to-Sink(USB Device)の決定」
節の「Sinkとの接続(connect)が確立したと認識して、VBUS(5V)を出力」までと考えられる。

リレーの所の動きを理解したい。CC1, CC2 の先には参考サイト2 によると 5.1kΩを遠して GND 接
続である。CC1, CC2 と比較している先の抵抗は 2kΩである。なのでスイッチが閉じると CC1/2 の
方が電圧が高くなる。

CC1 側が閉じたとする。するとコンパレータは -入力の方が大きいので LOW 出力だから CC2 が開く。
そのため今度は CC2 側のコンパレータで +入力が大きくなるので CC1 側が閉じる。これ受電側がも
しなにもしないと、ずっと交互にパタパタするだけなのではないだろうか。これも Arduino オシロ
で見れるかどうか確認してみたい。

回路図に描かれてないけど NJM2403 には V+ と GND の配線も必要だ。そうしないと out から 5V
が出ない。

また SS1A05D は信仰上の理由で買えないので、東芝あたりのフォトカプラで代用できそうだ。光で
動くスイッチなので少ない電流で動作するからコンパレータと使うのに相性が良い。
