# キッチンタイマーを作ろう

## 初版

まずは TinkerCAD で練習。

https://www.tinkercad.com/things/kBFFgeoPNej-timer

4 DIP スイッチで 0 分から 15 分まで設定できるようにする。2進数を使う。

マザボ用スピーカーでも Muvo Play でも音出しに成功したので、回路図。

![回路図](./kicad/timer01/timer01.png)

シールド設計図

![シールド設計図](./librecad/timer01.png)

完成したシールド。

![シールド実物](./photos/KitchenTimerShield.jpg)

### 課題

- リードフレームとピンヘッダの嵌め合いがゆるくて、動作しないことが多い
- Arduino は割と他のプログラムを書いてある機会が多いので、使いたいときに、すぐに使えない
- DIP スイッチが小さすぎて、思うように操作できない

## PIC 版 ver 1.0

PIC12F1840, 8 pin, 6 I/O のものが余ってるので、これで専用機を作る。

- RA1,2,4,5 をタイム設定用のスイッチに, RA0 をスピーカー出力にする。
- RA3 はリセットボタンとして使う。
- DIP スイッチじゃなくて、ピンヘッダを並べてジャンパーを挿すスタイルにしてみる

回路図はこんな感じ。

![PIC版1.0回路図](./pic_version/kicad/TimerPIC12F1840_1/TimerPic12F1840_1.png)

設計図はこんな感じ。

![PIC版 設計図 v1.0](./pic_version/librecad/timer01.png)

完成品はこんな感じ。

![PIC版完成品](./pic_version/KitchenTimerPIC_1.0.jpg)

配線に関する知見:

今回は片面基板 + シール基板主体での配線でやってみた。そこで得た知見。使ったのは Sunhayato
の直線配置のものと秋月の十字のもの。

- ちょっとぐらつく部品も出てくる。あまり気にせず、後から接着剤で良いかと思う。
- 部品取り付け穴周囲の難しくなってるところだけシール基板で良い。全部の配線を作り切る必要は
  ない。
  - 難しいところはシール基板がやってくれてるから、その間を単純な直線のみのスズメッキ線で継
    げば良い。
  - 普通なら部品の足にスズメッキ線を当てなくてはならないが、シール基板のおかげで、コの字に
    曲げて、穴にはめておけば押さえもなにも必要ないという手軽さ。
  - 長めにコの字にしておくと作業しやすい。邪魔ならあとでカットすれば良い。今回はしなかった
    が、残しておけばチェック端子の代りにもなる。
  - 銅箔はさほど便利ではないが、基板の穴が余計なはんだで塞がってしまっている場合、雑にはん
    だで押しつければ、はんだが回り込んで勝手にひっつくので、そういうところは、はんだを取り
    除くよりも手軽で便利
- シール基板の形を間違えていて、回路が足りなかったとき、もう一度正しい回路を作って、はんだ
  してあるリード線の上から入れて、はんだごてで雑に押しこめば、勝手にはんだが回り込んで、新
  しい回路で上書きできる。

そもそもスズメッキ線をくねくね曲げながら取り回すのをやりたくないから、もうスズメッキ線なん
て使わないようにしようと思って使ってみたシール基板だけど、実はスズメッキ線を楽に使えるよう
になるという、面白い結果となった。

反省点:

- ディップスイッチが使いづらいからジャンパーとピンヘッダで代用してみたけど、指が入らなくて
  エンジニアの SS-10 引き抜き工具を使うはめになっている。
  - 大きくなるけどトグルスイッチか、オルタネートなプッシュスイッチか
- リセットスイッチもトグルかオルタネート式の方が便利そう

## PIC 版 ver 2.0

NKK の小さなトグルスイッチ G-12 とオムロンの回しやすそうなロータリースイッチ A6A-16RW を入
手したので作り直してみる。

https://www.nkkswitches.co.jp/product/detailed/G-12AP.html

https://www.fa.omron.co.jp/products/family/2675/lineup.html

回路図を見直して 300Ωが気になったが、実測したところ目に見える電圧低下はなかったので、他に
使い道もないので 300Ωを消費することにする。

あと忘れやすいが RA3 のリセットピンは内部でプルアップされてるので、こちらからのプルアップ
は不要。

設計図↓
![設計図 2.0](./pic_version/librecad/timer02.png)

部品表

| 記号 | 品名等                                                 | 個数 |
| ---  | -----------------------------------------------------  | ---  |
| C1   | 0.1uF                                                  | 1    |
| IS1  | IC socket 8P                                           | 1    |
| JR1,2| Jumper register 0 ohm                                  | 2    |
| M1   | PIC12F1840                                             | 1    |
| PH1  | Pin header 3P                                          | 1    |
| PH2,3| Pin header 4P                                          | 2    |
| PS1,2| Pin socket 4P                                          | 2    |
| R1   | Volume 500 ohm                                         | 1    |
| R2-5 | 300 ohm                                                | 4    |
| SW1  | Toggle switch                                          | 1    |
| SW2  | Rotary switch                                          | 1    |
| UB1  | Universal board 12x7                                   | 1    |
| UB2  | Universal board 8x7                                    | 1    |
| XH1  | XH header 2P                                           | 1    |

ケーブル、スピーカー

| 品名等                                                          | 個数  |
| -------------------------------------------------------------   | ----- |
| XH ハウジング 2P                                                | 2     |
| XH コンタクト                                                   | 4     |
| AWG24 ケーブル                                                  | 適当  |
| スピーカー                                                      | 1     |

![完成品](./photos/キッチンタイマー2.0.jpeg)

感想:

- UI となる両スイッチを上段にしたことで、他と干渉せずに操作しやすい
